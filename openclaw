#!/usr/bin/env bash

# openclaw — wrapper script to run OpenClaw from source
#
# Calls node openclaw.mjs directly (the official CLI shim).
# Requires a prior `pnpm build` — does NOT auto-rebuild, because
# the dev auto-rebuild (run-node.mjs) only runs tsdown which
# deletes build-info.json and breaks version resolution.

set -euo pipefail

REPO_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

if [[ ! -f "$REPO_ROOT/openclaw.mjs" ]]; then
    echo "Error: openclaw.mjs not found. Run this from the repo root."
    exit 1
fi

if [[ ! -f "$REPO_ROOT/dist/entry.js" ]]; then
    echo "Error: dist/entry.js not found. Run 'pnpm build' first."
    exit 1
fi

exec node "$REPO_ROOT/openclaw.mjs" "$@"
